# Firestore ইউজার ইমপ্লিমেন্টেশন রিপোর্ট

## যা করা হয়েছে:

### ১. ইউজার মডেল তৈরি
- `UserModel` ক্লাস তৈরি করা হয়েছে নিম্নলিখিত ফিল্ড সহ:
  - `uid`: ইউজারের অনন্য আইডি
  - `name`: ইউজারের নাম
  - `email`: ইউজারের ইমেইল
  - `photoUrl`: ইউজারের ছবির URL (ঐচ্ছিক)
  - `createdAt`: অ্যাকাউন্ট তৈরির সময়
  - `lastSignIn`: শেষ সাইন-ইন সময়
- ফায়ারবেস ইউজার থেকে `UserModel` তৈরি করার মেথড যোগ করা হয়েছে
- Firestore ম্যাপ থেকে `UserModel` তৈরি করার মেথড যোগ করা হয়েছে
- `UserModel` কে Firestore ম্যাপে রূপান্তর করার মেথড যোগ করা হয়েছে

### ২. ইউজার রিপোজিটরি ইন্টারফেস
- `UserRepository` ইন্টারফেস তৈরি করা হয়েছে নিম্নলিখিত মেথড সহ:
  - `saveUser`: ইউজার ডাটাবেসে সংরক্ষণ করা
  - `getUserById`: UID দিয়ে ইউজার খুঁজে বের করা
  - `userExists`: ইউজার ডাটাবেসে আছে কিনা চেক করা
  - `updateLastSignIn`: ইউজারের শেষ সাইন-ইন সময় আপডেট করা
  - `saveUserFromSignIn`: সাইন-ইন করার পর ইউজার সংরক্ষণ বা আপডেট করা

### ৩. ফায়ারবেস ইউজার রিপোজিটরি
- `FirebaseUserRepository` ক্লাস তৈরি করা হয়েছে যা `UserRepository` ইমপ্লিমেন্ট করে
- Firestore ডাটাবেসে `users/{uid}` পাথে ইউজার ডাটা সংরক্ষণ করা হয়
- ডিপেন্ডেন্সি ইনজেকশন ব্যবহার করা হয়েছে টেস্টিং সহজ করার জন্য
- ত্রুটি হ্যান্ডলিং যোগ করা হয়েছে

### ৪. সার্ভিস লোকেটর আপডেট
- `ServiceLocator` ক্লাসে `UserRepository` যোগ করা হয়েছে
- `initialize` মেথডে `FirebaseUserRepository` ইনিশিয়ালাইজ করা হয়েছে
- `userRepository` গেটার যোগ করা হয়েছে

### ৫. অথেনটিকেশন রিপোজিটরি আপডেট
- `FirebaseAuthRepository` ক্লাসে `UserRepository` ইনজেকশন যোগ করা হয়েছে
- `signInWithGoogle` মেথড আপডেট করা হয়েছে যাতে সফল সাইন-ইনের পর ইউজার Firestore এ সংরক্ষণ করা হয়
- ইউজার আগে থেকে থাকলে শুধু `lastSignIn` আপডেট করা হয়, অন্যথায় নতুন ইউজার তৈরি করা হয়

## কীভাবে কাজ করে:

১. ইউজার যখন Google দিয়ে সাইন-ইন করে:
   - প্রথমে Firebase Authentication এ সাইন-ইন হয়
   - সাইন-ইন সফল হলে, `FirebaseAuthRepository` থেকে `UserRepository` কল করা হয়
   - `saveUserFromSignIn` মেথড চেক করে ইউজার আগে থেকে আছে কিনা
   - যদি ইউজার আগে থেকে থাকে, শুধু `lastSignIn` আপডেট করা হয়
   - যদি নতুন ইউজার হয়, Firebase ইউজার থেকে `UserModel` তৈরি করে Firestore এ সংরক্ষণ করা হয়

২. ডাটা স্ট্রাকচার:
   - Firestore এ `users` কালেকশন ব্যবহার করা হয়
   - প্রতিটি ইউজার ডকুমেন্টের আইডি হিসেবে Firebase Authentication UID ব্যবহার করা হয়
   - প্রতিটি ডকুমেন্টে ইউজারের সমস্ত তথ্য সংরক্ষণ করা হয়

## বিশেষ বৈশিষ্ট্য:

### ১. ক্লিন আর্কিটেকচার
- ডোমেইন লেয়ারে ইন্টারফেস এবং মডেল ডিফাইন করা হয়েছে
- ইমপ্লিমেন্টেশন ডিটেইলস ডোমেইন লেয়ারে আছে কিন্তু ইন্টারফেস দিয়ে অ্যাবস্ট্রাক্ট করা হয়েছে
- ডিপেন্ডেন্সি ইনজেকশন ব্যবহার করা হয়েছে

### ২. মাল্টি-প্ল্যাটফর্ম সাপোর্ট
- Android, iOS এবং Web - সব প্ল্যাটফর্মে একই কোড কাজ করবে
- Firestore SDK সব প্ল্যাটফর্মে সাপোর্ট করে

### ৩. আটোম্যাটিক ডাটা সিঙ্ক
- ইউজার ডাটা Firestore এ সংরক্ষিত হওয়ায় সব ডিভাইসে সিঙ্ক হবে
- অফলাইন সাপোর্ট আছে (Firestore এর ডিফল্ট ফিচার)

## পরবর্তী ধাপ:

১. ইউজার প্রোফাইল আপডেট ফিচার যোগ করা
২. ইউজার সেটিংস সংরক্ষণ করা
৩. ইউজার রোল এবং পারমিশন সিস্টেম যোগ করা 